var version=function(e,t,a,l,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(t);const u={DATASET_TYPES:["unitDataSet"],ID:"id",VARIABLE_TYPES:["instanceVariable","representedVariable","variable"]},d={OPEN:n.SSB_COLORS.BLUE,INTERNAL:n.SSB_COLORS.GREEN,SHIELDED:n.SSB_COLORS.YELLOW,SENSITIVE:n.SSB_COLORS.RED},c={DESCRIPTION:{en:"Description",nb:"Beskrivelse"},DIRECT:{en:"Direct",nb:"Direkte"},HAVE_FILTERED:(e,t)=>({en:`Reminder that you have filtered your search, in total there are ${t} hit(s), but you are only showing ${e}`,nb:`Obs, du har filtrert søket, totalt ${t} treff, men etter filtrering vises bare ${e}`}),LINEAGE:{en:"Indirect",nb:"Indirekte"},NAME:{en:"Name",nb:"Navn"},VALUATION:{en:"Valuation",nb:"Verdivurdering"},VARIABLE_IN_DATASETS:{en:"Variable linked in datasets",nb:"Datasett denne variabelen er koblet til"},VARIABLES_IN_DATASET:{en:"Variables linked to this dataset",nb:"Variabler koblet til dette datasettet"}},s="datasetsAccordionToggle",o="searchDatasetToggle",m={API_ERROR_MESSAGE:{en:"Something went wrong, check settings",nb:"Noe gikk galt, sjekk innstillingene"},BOXES:{en:"Boxes",nb:"Bokser"},CONFIGURE_SEARCH:{en:"Adjust search parameters",nb:"Søkealternativer"},COPY_ID_TO_CLIPBOARD:{en:"Click to copy id to clipboard",nb:"Klikk for å kopiere id til utklippstavlen"},DATASETS:{en:"Datasets",nb:"Datasett"},EDITED:{en:"Current results are from previous search",nb:"Resultatene gjelder forrige søk"},HEADER:{en:"Variable search",nb:"Variabelsøk"},NEW_SEARCH:{en:"Hit 'Enter' for a new search",nb:"Trykk 'Enter' for et nytt søk"},NO_RESULTS:{en:"Found nothing",nb:"Fant ingenting"},SEARCH:{en:"Search...",nb:"Søk..."},SEARCH_DATASETS:{en:"Search for datasets as well:",nb:"Søk etter datasett også?"},SHOW_OF_TYPE:(e,t)=>({en:`Of ${m[e][t].toLowerCase()} show me: `,nb:`Av ${m[e][t].toLowerCase()} vis meg: `}),SHOW_RESULTS_AS:{en:"Show results as:",nb:"Vis resultater som:"},TABLE:{en:"Table",nb:"Tabell"},VARIABLES:{en:"Variables",nb:"Variabler"}};function E({searchDataset:e,resultAsBoxes:t,handleSearchDataset:a,handleResultAsBoxes:n,variableTypeFilter:r,handleVariableTypeCheckbox:d,language:c}){const s=[{key:1,title:m.CONFIGURE_SEARCH[c],content:{content:i.default.createElement(l.Grid,{columns:"equal"},i.default.createElement(l.Grid.Row,null,i.default.createElement(l.Grid.Column,null,m.SHOW_RESULTS_AS[c]),i.default.createElement(l.Grid.Column,null,i.default.createElement(l.List,null,i.default.createElement(l.List.Item,null,i.default.createElement(l.Checkbox,{label:m.BOXES[c],checked:t,onClick:()=>n(!0)})),i.default.createElement(l.List.Item,null,i.default.createElement(l.Checkbox,{label:m.TABLE[c],checked:!t,onClick:()=>n(!1)}))))),i.default.createElement(l.Grid.Row,null,i.default.createElement(l.Grid.Column,null,m.SHOW_OF_TYPE("VARIABLES",c)[c]),i.default.createElement(l.Grid.Column,null,i.default.createElement(l.List,null,u.VARIABLE_TYPES.map((e=>i.default.createElement(l.List.Item,{key:e},i.default.createElement(l.Checkbox,{label:e,checked:r.includes(e),onClick:()=>d(r.includes(e),e)}))))))),i.default.createElement(l.Grid.Row,null,i.default.createElement(l.Grid.Column,null,m.SEARCH_DATASETS[c]),i.default.createElement(l.Grid.Column,null,i.default.createElement(l.Checkbox,{checked:e,"data-testid":o,onClick:()=>a(!e)}))))}}];return i.default.createElement(l.Accordion,{defaultActiveIndex:-1,panels:s})}function f({id:e,type:t,language:a}){return i.default.createElement(n.InfoPopup,{text:m.COPY_ID_TO_CLIPBOARD[a],trigger:i.default.createElement(l.Icon,{link:!0,fitted:!0,size:"large",name:"copy outline",style:{color:n.SSB_COLORS.BLUE},onClick:()=>{navigator.clipboard?navigator.clipboard.writeText(e).then((()=>{console.log(`Copied ${t} id to the clipboard: ${e}`)}),(e=>{console.log(e)})):console.log("Copy to clipboard not supported in your browser")}})})}function g({datasets:e,language:t}){return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Table,{basic:"very",selectable:!0},i.default.createElement(l.Table.Header,null,i.default.createElement(l.Table.Row,null,i.default.createElement(l.Table.HeaderCell,{collapsing:!0}),i.default.createElement(l.Table.HeaderCell,null,c.NAME[t]),i.default.createElement(l.Table.HeaderCell,null,c.DESCRIPTION[t]),i.default.createElement(l.Table.HeaderCell,null,c.VALUATION[t]),i.default.createElement(l.Table.HeaderCell,null,c.VARIABLES_IN_DATASET[t]))),i.default.createElement(l.Table.Body,null,e.map((e=>{const a=Object.keys(e)[0],r=e[a],{id:u,name:c,description:s,valuation:o,unitDataStructure:m}=r,E=n.getNestedObject(m,["logicalRecords"]).map((e=>e.instanceVariables));return i.default.createElement(l.Table.Row,{key:u},i.default.createElement(l.Table.Cell,{textAlign:"center"},i.default.createElement(f,{id:u,type:a,language:t})),i.default.createElement(l.Table.Cell,null,n.getLocalizedGsimObjectText(t,c)),i.default.createElement(l.Table.Cell,null,n.getLocalizedGsimObjectText(t,s)),i.default.createElement(l.Table.Cell,null,i.default.createElement("span",{style:{color:d[o]}},o)),i.default.createElement(l.Table.Cell,null,0===E.length?"-":i.default.createElement(l.List,{bulleted:!0},E.map((e=>e.map((e=>i.default.createElement(l.List.Item,{key:e.id},n.getLocalizedGsimObjectText(t,e.name),i.default.createElement("br",null),i.default.createElement("i",null,n.getLocalizedGsimObjectText(t,e.description))))))))))})))))}function b({language:e,filtered:t,total:a}){return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Icon,{name:"warning circle",style:{color:n.SSB_COLORS.BLUE}}),c.HAVE_FILTERED(t,a)[e],i.default.createElement(l.Divider,{hidden:!0}))}function T({dataset:e,language:t}){const{name:a}=e,r=n.getLocalizedGsimObjectText(t,a);return i.default.createElement(l.Modal,{style:n.SSB_STYLE,content:i.default.createElement(l.Segment,{basic:!0},i.default.createElement(l.Grid,null,Object.entries(e).map((([e,a])=>i.default.createElement(l.Grid.Row,{key:e},i.default.createElement(l.Grid.Column,{width:4},i.default.createElement("b",null,e)),i.default.createElement(l.Grid.Column,{width:12},"name"===e||"description"===e?n.getLocalizedGsimObjectText(t,a):a)))))),trigger:i.default.createElement("span",null,r)})}const S={instanceVariable:"id: $id",representedVariable:"representedVariable: {id: $id}",variable:"representedVariable: {variable: {id: $id}}"};function p({id:e,type:r,language:d}){const[o,E]=t.useState(-1),[f,g]=t.useState([]),[b,{loading:p,error:A,data:y}]=a.useManualQuery(`\n  {\n    unitDataSet(filter: {lineage: {reverseLineageFieldLineageDataset_every: {smart_every: {instanceVariable: {${S[r]}}}}}}) {\n      id\n      name {languageText}\n      description {languageText}\n      version\n      administrativeStatus\n      valuation\n      createdBy\n      dataSourcePath\n      lastUpdatedBy\n      metadataSourcePath\n      shortName\n      temporalityType\n      dataSetState\n    }\n  }\n`,{variables:{id:e}});t.useEffect((()=>{p||A||void 0===y||Array.isArray(y)&&0!==y.length&&g(y.map((e=>e[u.DATASET_TYPES[0]])).filter((e=>{const{name:t}=e;return""!==n.getLocalizedGsimObjectText(d,t)})))}),[p,A,y,r,d]);const C=[{key:1,title:{content:i.default.createElement("b",null,c.VARIABLE_IN_DATASETS[d]),"data-testid":s},content:{content:p?i.default.createElement(l.Icon,{loading:!0,name:"spinner"}):f.length>=1?i.default.createElement(l.List,{bulleted:!0,style:{padding:"0 1rem 1rem 1rem"}},f.map((e=>{const{id:t}=e;return i.default.createElement(l.List.Item,{key:t,as:"a"},i.default.createElement(T,{dataset:e,language:d}))}))):m.NO_RESULTS[d]}}];return i.default.createElement(l.Accordion,{activeIndex:o,panels:C,onTitleClick:(e,{index:t})=>{o!==t&&b(),E(o===t?-1:t)}})}function A({language:e,resultAsBoxes:a,variables:r,variableTypeFilter:u}){const[d,s]=t.useState(r.filter((e=>u.includes(Object.keys(e)[0]))));return t.useEffect((()=>{s(r.filter((e=>u.includes(Object.keys(e)[0]))))}),[r,u]),i.default.createElement(i.default.Fragment,null,3!==u.length&&i.default.createElement(b,{language:e,filtered:d.length,total:r.length}),a?d.map((t=>{const a=Object.keys(t)[0],r=t[a],{id:u,name:d,description:s}=r;return i.default.createElement(l.Segment,{key:u,raised:!0},i.default.createElement(l.Label,{ribbon:!0,color:"blue"},a),i.default.createElement(l.Label,{attached:"top right"},i.default.createElement(f,{id:u,type:a,language:e})),i.default.createElement(l.Grid,{columns:"equal"},i.default.createElement(l.Grid.Column,null,i.default.createElement(l.Divider,{hidden:!0,style:{marginBottom:0}}),i.default.createElement(l.Grid,null,i.default.createElement(l.Grid.Row,null,i.default.createElement(l.Grid.Column,{width:4},i.default.createElement("b",null,c.NAME[e])),i.default.createElement(l.Grid.Column,{width:12},n.getLocalizedGsimObjectText(e,d))),i.default.createElement(l.Grid.Row,null,i.default.createElement(l.Grid.Column,{width:4},i.default.createElement("b",null,c.DESCRIPTION[e])),i.default.createElement(l.Grid.Column,{width:12},n.getLocalizedGsimObjectText(e,s))))),i.default.createElement(l.Grid.Column,null,i.default.createElement(p,{id:u,type:a,language:e}))))})):i.default.createElement(l.Table,{basic:"very",selectable:!0},i.default.createElement(l.Table.Header,null,i.default.createElement(l.Table.Row,null,i.default.createElement(l.Table.HeaderCell,{collapsing:!0}),i.default.createElement(l.Table.HeaderCell,null,c.NAME[e]),i.default.createElement(l.Table.HeaderCell,null,c.DESCRIPTION[e]),i.default.createElement(l.Table.HeaderCell,null))),i.default.createElement(l.Table.Body,null,d.map((t=>{const a=Object.keys(t)[0],r=t[a],{id:u,name:d,description:c}=r;return i.default.createElement(l.Table.Row,{key:u},i.default.createElement(l.Table.Cell,{textAlign:"center",collapsing:!0},i.default.createElement(f,{id:u,type:a,language:e})),i.default.createElement(n.InfoPopup,{text:a,trigger:i.default.createElement(l.Table.Cell,null,n.getLocalizedGsimObjectText(e,d))}),i.default.createElement(n.InfoPopup,{text:a,trigger:i.default.createElement(l.Table.Cell,null,n.getLocalizedGsimObjectText(e,c))}),i.default.createElement(l.Table.Cell,null,i.default.createElement(p,{id:u,type:a,language:e})))})))))}return e.VariableSearch=function({language:e}){const[r,d]=t.useState(!1),[c,s]=t.useState(""),[o,f]=t.useState(!1),[b,T]=t.useState(!0),[S,p]=t.useState(!1),[y,C]=t.useState(""),[h,O]=t.useState([]),[L,R]=t.useState([]),[_,x]=t.useState([u.VARIABLE_TYPES[1]]),[I,{loading:k,error:v,data:D}]=a.useManualQuery("\n{\n  instanceVariable(filter: {OR: [{name_every: {languageText_contains: $text}}, {description_every: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  representedVariable(filter: {OR: [{name_every: {languageText_contains: $text}}, {description_every: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  variable(filter: {OR: [{name_every: {languageText_contains: $text}}, {description_every: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  unitDataSet(filter: {OR: [{name_every: {languageText_contains: $text}}, {description_every: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n    version\n    administrativeStatus\n    valuation\n    createdBy\n    dataSourcePath\n    lastUpdatedBy\n    metadataSourcePath\n    shortName\n    temporalityType\n    dataSetState\n    unitDataStructure {\n      logicalRecords {\n        instanceVariables {\n          id\n          name {languageText}\n          description {languageText}\n        }\n      }\n    }\n  }\n}\n",{variables:{text:c}});t.useEffect((()=>{if(!v&&!k&&void 0!==D){const t=((e,t)=>({variables:e.filter((e=>u.VARIABLE_TYPES.some((t=>Object.getOwnPropertyNames(e).includes(t)&&null!==e.id)))),datasets:e.filter((e=>u.DATASET_TYPES.some((t=>Object.getOwnPropertyNames(e).includes(t))))).filter((e=>{const{name:a}=e[u.DATASET_TYPES[0]];return""!==n.getLocalizedGsimObjectText(t,a)}))}))(D,e);O(t.datasets),R(t.variables)}}),[v,k,D,e]);const B=[{menuItem:i.default.createElement(l.Menu.Item,{key:"variables"},m.VARIABLES[e],i.default.createElement(l.Label,{style:{background:n.SSB_COLORS.BLUE}},k?i.default.createElement(l.Icon,{loading:!0,name:"spinner"}):L.length)),render:()=>L.length>=1?i.default.createElement(l.Tab.Pane,{as:l.Segment,basic:!0,style:{border:"none"}},i.default.createElement(A,{language:e,variables:L,resultAsBoxes:b,variableTypeFilter:_})):null},{menuItem:i.default.createElement(l.Menu.Item,{key:"datasets"},m.DATASETS[e],i.default.createElement(l.Label,{style:{background:n.SSB_COLORS.BLUE}},k?i.default.createElement(l.Icon,{loading:!0,name:"spinner"}):h.length)),render:()=>h.length>=1?i.default.createElement(l.Tab.Pane,{as:l.Segment,basic:!0,style:{border:"none"}},i.default.createElement(g,{language:e,datasets:h})):null}];return i.default.createElement(l.Grid,null,i.default.createElement(l.Grid.Column,{width:3},i.default.createElement(l.Search,{size:"huge",open:!1,loading:k,value:c,placeholder:m.SEARCH[e],onKeyPress:({key:e})=>"Enter"===e&&void(c.length>=1&&(d(!0),f(!1),C(c),I())),onSearchChange:(e,{value:t})=>{f(!0),s(t)}}),r&&o&&i.default.createElement(n.InfoText,{text:m.EDITED[e]}),r&&o&&""!==y&&i.default.createElement(i.default.Fragment,null," '",i.default.createElement("b",null,y),"'",i.default.createElement("p",null,m.NEW_SEARCH[e])),i.default.createElement(E,{language:e,resultAsBoxes:b,searchDataset:S,variableTypeFilter:_,handleResultAsBoxes:e=>T(e),handleSearchDataset:e=>p(e),handleVariableTypeCheckbox:(e,t)=>{x(e?_.filter((e=>e!==t)):_.concat([t]))}})),i.default.createElement(l.Grid.Column,{width:13},i.default.createElement(l.Tab,{defaultActiveIndex:0,menu:{secondary:!0,pointing:!0},panes:S?B:[B.shift()]})))},e}({},React,graphqlHooks,semanticUiReact,daplaJsUtilities);
