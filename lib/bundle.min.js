var version=function(e,t,a,n,l){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(t);const d="description",c="instanceVariable",u="instanceVariables",s="logicalRecords",o="name",m="representedVariable",g="variable",E={DATASET_TYPES:["unitDataSet"],VARIABLE_TYPES:["instanceVariable","representedVariable","variable"]},f="lineageDataset",b={LF_IV:"reverseLineageFieldInstanceVariable",IV_RV:"reverseInstanceVariableRepresentedVariable",RV_V:"reverseRepresentedVariableVariable",UDS_L:"reverseUnitDataSetLineage"},S="smart",T=(l.SSB_COLORS.BLUE,l.SSB_COLORS.GREEN,l.SSB_COLORS.YELLOW,l.SSB_COLORS.RED,{DATA_SOURCE_PATH:{en:"Data source path",nb:"Datasti"},DESCRIPTION:{en:"Description",nb:"Beskrivelse"},HAVE_FILTERED:(e,t)=>({en:`Reminder that you have filtered your search, in total there are ${t} hit(s), but you are only showing ${e}`,nb:`Obs, du har filtrert søket, totalt ${t} treff, men etter filtrering vises bare ${e}`}),INHERITS_FROM:{en:"Inherits from",nb:"Arver fra"},NAME:{en:"Name",nb:"Navn"},VARIABLE_IN_DATASETS:{en:"Variable linked in datasets",nb:"Datasett denne variabelen er koblet til"},VARIABLES_IN_DATASET:{en:"Variables linked to this dataset",nb:"Variabler koblet til dette datasettet"}}),h="datasetsAccordionToggle",p="searchDatasetToggle",y={API_ERROR_MESSAGE:{en:"Something went wrong, check settings",nb:"Noe gikk galt, sjekk innstillingene"},CONFIGURE_SEARCH:{en:"Adjust search parameters",nb:"Søkealternativer"},COPY_ID_TO_CLIPBOARD:{en:"Click to copy id to clipboard",nb:"Klikk for å kopiere id til utklippstavlen"},DATASETS:{en:"Datasets",nb:"Datasett"},EDITED:{en:"Current results are from previous search",nb:"Resultatene gjelder forrige søk"},HEADER:{en:"Variable search",nb:"Variabelsøk"},NEW_SEARCH:{en:"Hit 'Enter' for a new search",nb:"Trykk 'Enter' for et nytt søk"},NO_RESULTS:{en:"Found nothing",nb:"Fant ingenting"},OTHER:{en:"Other:",nb:"Annet:"},SEARCH:{en:"Search...",nb:"Søk..."},SEARCH_DATASETS:{en:"Search for datasets as well?",nb:"Søk etter datasett også?"},SHOW_OF_TYPE:(e,t)=>({en:`Of ${y[e][t].toLowerCase()} show me: `,nb:`Av ${y[e][t].toLowerCase()} vis meg: `}),VARIABLES:{en:"Variables",nb:"Variabler"}};function _({searchDataset:e,handleSearchDataset:t,variableTypeFilter:a,handleVariableTypeCheckbox:l,language:r}){const d=[{key:1,title:y.CONFIGURE_SEARCH[r],content:{content:i.default.createElement(i.default.Fragment,null,i.default.createElement(n.Header,{size:"tiny",content:y.SHOW_OF_TYPE("VARIABLES",r)[r]}),i.default.createElement(n.List,null,E.VARIABLE_TYPES.map((e=>i.default.createElement(n.List.Item,{key:e},i.default.createElement(n.Checkbox,{label:e,checked:a.includes(e),onClick:()=>l(a.includes(e),e)}))))),i.default.createElement(n.Divider,{hidden:!0}),i.default.createElement(n.Header,{size:"tiny",content:y.OTHER[r]}),i.default.createElement(n.Checkbox,{toggle:!0,checked:e,label:y.SEARCH_DATASETS[r],"data-testid":p,onClick:()=>t(!e)}))}}];return i.default.createElement(n.Accordion,{defaultActiveIndex:0,panels:d,styled:!0})}function v({id:e,type:t,language:a}){return i.default.createElement(l.InfoPopup,{text:y.COPY_ID_TO_CLIPBOARD[a],trigger:i.default.createElement(n.Icon,{link:!0,fitted:!0,size:"large",name:"copy outline",style:{color:l.SSB_COLORS.BLUE},onClick:()=>{navigator.clipboard?navigator.clipboard.writeText(e).then((()=>{console.log(`Copied ${t} id to the clipboard: ${e}`)}),(e=>{console.log(e)})):console.log("Copy to clipboard not supported in your browser")}})})}function A({datasets:e,language:t}){return i.default.createElement(i.default.Fragment,null,i.default.createElement(n.Table,{basic:"very",selectable:!0},i.default.createElement(n.Table.Header,null,i.default.createElement(n.Table.Row,null,i.default.createElement(n.Table.HeaderCell,{collapsing:!0}),i.default.createElement(n.Table.HeaderCell,null,T.NAME[t]),i.default.createElement(n.Table.HeaderCell,null,T.DESCRIPTION[t]),i.default.createElement(n.Table.HeaderCell,null,T.DATA_SOURCE_PATH[t]),i.default.createElement(n.Table.HeaderCell,null,T.VARIABLES_IN_DATASET[t]))),i.default.createElement(n.Table.Body,null,e.map((e=>{const a=Object.keys(e)[0],r=e[a],{id:d,name:c,description:o,dataSourcePath:m,unitDataStructure:g}=r,E=l.getNestedObject(g,[s]).map((e=>e[u]));return i.default.createElement(n.Table.Row,{key:d},i.default.createElement(n.Table.Cell,{textAlign:"center"},i.default.createElement(v,{id:d,type:a,language:t})),i.default.createElement(n.Table.Cell,null,l.getLocalizedGsimObjectText(t,c)),i.default.createElement(n.Table.Cell,null,l.getLocalizedGsimObjectText(t,o)),i.default.createElement(n.Table.Cell,null,m),i.default.createElement(n.Table.Cell,null,0===E.length?"-":i.default.createElement(n.List,{bulleted:!0},E.map((e=>e.map((e=>{const{id:a,name:r,description:d}=e;return i.default.createElement(n.List.Item,{key:a},l.getLocalizedGsimObjectText(t,r),i.default.createElement("br",null),i.default.createElement("i",null,l.getLocalizedGsimObjectText(t,d)))})))))))})))))}function R({language:e,filtered:t,total:a}){return i.default.createElement(i.default.Fragment,null,i.default.createElement(n.Icon,{name:"warning circle",style:{color:l.SSB_COLORS.BLUE}}),T.HAVE_FILTERED(t,a)[e],i.default.createElement(n.Divider,{hidden:!0}))}function L({dataset:e,language:t}){const{name:a,description:r}=e,c=l.getLocalizedGsimObjectText(t,a),u=l.getLocalizedGsimObjectText(t,r);return i.default.createElement(n.Modal,{style:l.SSB_STYLE,content:i.default.createElement(n.Segment,{basic:!0},i.default.createElement(n.Grid,null,Object.entries(e).map((([e,a])=>i.default.createElement(n.Grid.Row,{key:e},i.default.createElement(n.Grid.Column,{width:4},i.default.createElement("b",null,e)),i.default.createElement(n.Grid.Column,{width:12},e===o||e===d?l.getLocalizedGsimObjectText(t,a):a)))))),trigger:i.default.createElement("p",null,i.default.createElement("b",null,c),i.default.createElement("br",null),u)})}const O={instanceVariable:"\n    {\n      instanceVariable(filter: {id: $id}) {\n        id\n        reverseLineageFieldInstanceVariable {\n          id\n          smart {\n            id\n            lineageDataset {\n              id\n              reverseUnitDataSetLineage {\n                id\n                name {languageText}\n                description {languageText}\n                version\n                administrativeStatus\n                valuation\n                createdBy\n                lastUpdatedBy\n                metadataSourcePath\n                shortName\n                temporalityType\n                dataSetState\n                dataSourcePath\n              }\n            }\n          }\n        }\n      }\n    }\n  ",representedVariable:"\n    {\n      representedVariable(filter: {id: $id}) {\n        id\n        reverseInstanceVariableRepresentedVariable {\n          id\n          reverseLineageFieldInstanceVariable {\n            id\n            smart {\n              id\n              lineageDataset {\n                id\n                reverseUnitDataSetLineage {\n                  id\n                  name {languageText}\n                  description {languageText}\n                  version\n                  administrativeStatus\n                  valuation\n                  createdBy\n                  lastUpdatedBy\n                  metadataSourcePath\n                  shortName\n                  temporalityType\n                  dataSetState\n                  dataSourcePath\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  ",variable:"\n    {\n      variable(filter: {id: $id}) {\n        id\n        reverseRepresentedVariableVariable {\n          id\n          reverseInstanceVariableRepresentedVariable {\n            id\n            reverseLineageFieldInstanceVariable {\n              id\n              smart {\n                id\n                lineageDataset {\n                  id\n                  reverseUnitDataSetLineage {\n                    id\n                    name {languageText}\n                    description {languageText}\n                    version\n                    administrativeStatus\n                    valuation\n                    createdBy\n                    lastUpdatedBy\n                    metadataSourcePath\n                    shortName\n                    temporalityType\n                    dataSetState\n                    dataSourcePath\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  "},I=(e,t)=>e.reduce(((e,a)=>{const n=[];let l;switch(t){case c:l=a[t][b.LF_IV];break;case m:l=((e,t)=>{const a=e[t][b.IV_RV],n=[];let l=!1;return 0!==a.length&&(a.forEach((e=>e[b.LF_IV].forEach((e=>n.push(e))))),0!==n.length&&(l=n)),l})(a,t);break;case g:l=((e,t)=>{const a=e[t][b.RV_V],n=[],l=[];let r;return 0!==a.length&&(a.forEach((e=>e[b.IV_RV].forEach((e=>n.push(e))))),0!==n.length&&(n.forEach((e=>e[b.LF_IV].forEach((e=>l.push(e))))),0!==l.length&&(r=l))),r})(a,t);break;default:l=a[t][b.LF_IV]}return l&&0!==l.length&&l.forEach((e=>{const t=e[S];if(0!==t.length){const e=t.filter((e=>e[f].hasOwnProperty(b.UDS_L)&&0!==e[f][b.UDS_L].length));0!==e.length&&e.forEach((e=>{e[f][b.UDS_L].forEach((e=>n.push(e)))}))}})),n}),[]);function x({id:e,type:l,language:r}){const[d,c]=t.useState(-1),[u,s]=t.useState([]),[o,{loading:m,error:g,data:E}]=a.useManualQuery(O[l],{variables:{id:e}});t.useEffect((()=>{if(!m&&!g&&void 0!==E&&Array.isArray(E)&&0!==E.length){const e=I(E,l),t=e.filter(((e,t,a)=>a.findIndex((t=>t.id===e.id))===t));e.length!==t.length&&(console.log("Unfiltered datasets"),console.log(e)),s(t)}}),[m,g,E,l,r]);const f=[{key:1,title:{content:i.default.createElement("b",null,T.VARIABLE_IN_DATASETS[r]),"data-testid":h},content:{content:m?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):u.length>=1?i.default.createElement(n.List,{bulleted:!0,relaxed:!0,style:{padding:"0 1rem 1rem 1rem"}},u.map((e=>{const{id:t}=e;return i.default.createElement(n.List.Item,{key:t,as:"a"},i.default.createElement(L,{dataset:e,language:r}))}))):y.NO_RESULTS[r]}}];return i.default.createElement(n.Accordion,{activeIndex:d,panels:f,onTitleClick:(e,{index:t})=>{d!==t&&o(),c(d===t?-1:t)}})}function C({language:e,variables:a,variableTypeFilter:r}){const[d,u]=t.useState(a.filter((e=>r.includes(Object.keys(e)[0]))));return t.useEffect((()=>{u(a.filter((e=>r.includes(Object.keys(e)[0]))))}),[a,r]),i.default.createElement(i.default.Fragment,null,3!==r.length&&i.default.createElement(R,{language:e,filtered:d.length,total:a.length}),d.map((t=>{const a=Object.keys(t)[0],r=t[a],{id:d,name:u,description:s}=r;let E=!1,f=!1;return a===c&&(E=l.getLocalizedGsimObjectText(e,r[m][o]),f=m),a===m&&(E=l.getLocalizedGsimObjectText(e,r[g][o]),f=g),i.default.createElement(n.Segment,{key:d,raised:!0},i.default.createElement(n.Label,{ribbon:!0,color:"blue"},a),i.default.createElement(n.Label,{attached:"top right"},i.default.createElement(v,{id:d,type:a,language:e})),i.default.createElement(n.Grid,{columns:"equal"},i.default.createElement(n.Grid.Column,null,i.default.createElement(n.Divider,{hidden:!0,style:{marginBottom:0}}),i.default.createElement(n.Grid,null,i.default.createElement(n.Grid.Row,null,i.default.createElement(n.Grid.Column,{width:4},i.default.createElement("b",null,T.NAME[e])),i.default.createElement(n.Grid.Column,{width:12},l.getLocalizedGsimObjectText(e,u))),i.default.createElement(n.Grid.Row,null,i.default.createElement(n.Grid.Column,{width:4},i.default.createElement("b",null,T.DESCRIPTION[e])),i.default.createElement(n.Grid.Column,{width:12},l.getLocalizedGsimObjectText(e,s))),E&&i.default.createElement(n.Grid.Row,null,i.default.createElement(n.Grid.Column,{width:4},i.default.createElement("b",null,T.INHERITS_FROM[e])),i.default.createElement(n.Grid.Column,{width:12},`${E} (${f})`)))),i.default.createElement(n.Grid.Column,null,i.default.createElement(x,{id:d,type:a,language:e}))))})))}return e.VariableSearch=function({language:e}){const[r,d]=t.useState(!1),[c,u]=t.useState(""),[s,o]=t.useState(!1),[m,g]=t.useState(!1),[f,b]=t.useState(""),[S,T]=t.useState([]),[h,p]=t.useState([]),[v,R]=t.useState(E.VARIABLE_TYPES),[L,{loading:O,error:I,data:x}]=a.useManualQuery("\n{\n  instanceVariable(filter: {OR: [{name_every: {languageText_contains: $text}}, {description_every: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n    representedVariable {\n      id\n      name {languageText}\n      description {languageText}\n    }\n  }\n  representedVariable(filter: {OR: [{name_every: {languageText_contains: $text}}, {description_every: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n    variable {\n      id\n      name {languageText}\n      description {languageText}\n    }\n  }\n  variable(filter: {OR: [{name_every: {languageText_contains: $text}}, {description_every: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  unitDataSet(filter: {OR: [{name_every: {languageText_contains: $text}}, {description_every: {languageText_contains: $text}}, {dataSourcePath_contains: $text}]}) {\n    id\n    name {languageText}\n    description {languageText}\n    version\n    administrativeStatus\n    valuation\n    createdBy\n    dataSourcePath\n    lastUpdatedBy\n    metadataSourcePath\n    shortName\n    temporalityType\n    dataSetState\n    unitDataStructure {\n      logicalRecords {\n        instanceVariables {\n          id\n          name {languageText}\n          description {languageText}\n        }\n      }\n    }\n  }\n}\n",{variables:{text:c.trim()}});t.useEffect((()=>{if(!I&&!O&&void 0!==x){const t={variables:(e=x).filter((e=>E.VARIABLE_TYPES.some((t=>Object.getOwnPropertyNames(e).includes(t))))),datasets:e.filter((e=>E.DATASET_TYPES.some((t=>Object.getOwnPropertyNames(e).includes(t)))))};T(t.datasets),p(t.variables)}var e}),[I,O,x,e]);const V=[{menuItem:i.default.createElement(n.Menu.Item,{key:"variables"},y.VARIABLES[e],i.default.createElement(n.Label,{style:{background:l.SSB_COLORS.BLUE}},O?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):h.length)),render:()=>h.length>=1?i.default.createElement(n.Tab.Pane,{as:n.Segment,basic:!0,style:{border:"none"}},i.default.createElement(C,{language:e,variables:h,variableTypeFilter:v})):null},{menuItem:i.default.createElement(n.Menu.Item,{key:"datasets"},y.DATASETS[e],i.default.createElement(n.Label,{style:{background:l.SSB_COLORS.BLUE}},O?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):S.length)),render:()=>S.length>=1?i.default.createElement(n.Tab.Pane,{as:n.Segment,basic:!0,style:{border:"none"}},i.default.createElement(A,{language:e,datasets:S})):null}];return i.default.createElement(n.Grid,null,i.default.createElement(n.Grid.Column,{width:3},i.default.createElement(n.Container,{textAlign:"center"},i.default.createElement(n.Search,{size:"huge",open:!1,loading:O,value:c,placeholder:y.SEARCH[e],onKeyPress:({key:e})=>"Enter"===e&&void(c.length>=1&&(d(!0),o(!1),b(c),L())),onSearchChange:(e,{value:t})=>{o(!0),u(t)}}),r&&s&&i.default.createElement(l.InfoText,{text:y.EDITED[e]}),r&&s&&""!==f&&i.default.createElement(i.default.Fragment,null," '",i.default.createElement("b",null,f),"'",i.default.createElement("p",null,y.NEW_SEARCH[e]))),i.default.createElement(n.Divider,{hidden:!0}),i.default.createElement(_,{language:e,searchDataset:m,variableTypeFilter:v,handleSearchDataset:e=>g(e),handleVariableTypeCheckbox:(e,t)=>{R(e?v.filter((e=>e!==t)):v.concat([t]))}})),i.default.createElement(n.Grid.Column,{width:13},i.default.createElement(n.Tab,{defaultActiveIndex:0,menu:{secondary:!0,pointing:!0},panes:m?V:[V.shift()]})))},Object.defineProperty(e,"__esModule",{value:!0}),e}({},React,graphqlHooks,semanticUiReact,daplaJsUtilities);
