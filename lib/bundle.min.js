var version=function(e,t,a,n,l){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(t);const c={DESCRIPTION:{en:"Description",nb:"Beskrivelse"},HAVE_FILTERED:(e,t)=>({en:`Reminder that you have filtered your search, in total there are ${t} hit(s), but you are only showing ${e}`,nb:`Obs, du har filtrert søket, totalt ${t} treff, men etter filtrering vises bare ${e}`}),NAME:{en:"Name",nb:"Navn"},TYPE:{en:"Type",nb:"Type"},VARIABLE_IN_DATASETS:{en:"Variable used in datasets",nb:"Datasett variabelen er brukt i"}},u={API_ERROR_MESSAGE:{en:"Something went wrong, check settings",nb:"Noe gikk galt, sjekk innstillingene"},CONFIGURE_SEARCH:{en:"Adjust search parameters",nb:"Søkealternativer"},DATASETS:{en:"Datasets",nb:"Datasett"},EDITED:{en:"Current results came from a previous search",nb:"Resultatene som foreligger gjelder forrige søk"},EXTERNAL_GRAPHIQL:{en:"Access GraphiQL directly",nb:"Skriv Graphql spørringer direkte mot tjenesten"},HEADER:{en:"Variable search",nb:"Variabelsøk"},NEW_SEARCH:{en:"Hit 'Enter' for a new search",nb:"Trykk 'Enter' for et nytt søk"},NO_RESULTS:{en:"Found nothing",nb:"Fant ingenting"},PREVIOUS:{en:"wich was: ",nb:"som var: "},SEARCH:{en:"Search...",nb:"Søk..."},SHOW_OF_TYPE:(e,t)=>({en:`Of ${u[e][t].toLowerCase()} show me: `,nb:`Av ${u[e][t].toLowerCase()} vis meg: `}),VARIABLES:{en:"Variables",nb:"Variabler"}},s=["reverseLogicalRecordInstanceVariables","reverseUnitDataStructureLogicalRecords","reverseUnitDataSetUnitDataStructure"],d=["reverseInstanceVariableRepresentedVariable"].concat(s),o={DATASET_TYPES:["dimensionalDataSet","unitDataSet"],REVERSE:{instanceVariable:s,representedVariable:d,variable:["reverseRepresentedVariableVariable"].concat(d)},VARIABLE_TYPES:["instanceVariable","representedVariable","variable"]};l.SSB_COLORS.BLUE,l.SSB_COLORS.GREEN,l.SSB_COLORS.YELLOW,l.SSB_COLORS.RED;function E({datasetTypeFilter:e,handleDatasetTypeCheckbox:t,variableTypeFilter:a,handleVariableTypeCheckbox:l,language:r}){const c=[{key:1,title:u.CONFIGURE_SEARCH[r],content:{content:i.default.createElement(n.Grid,{columns:"equal"},i.default.createElement(n.Grid.Row,null,i.default.createElement(n.Grid.Column,null,u.SHOW_OF_TYPE("DATASETS",r)[r]),i.default.createElement(n.Grid.Column,null,o.DATASET_TYPES.map(a=>i.default.createElement(n.Checkbox,{key:a,label:a,checked:e.includes(a),onClick:()=>t(e.includes(a),a)})))),i.default.createElement(n.Grid.Row,null,i.default.createElement(n.Grid.Column,null,u.SHOW_OF_TYPE("VARIABLES",r)[r]),i.default.createElement(n.Grid.Column,null,o.VARIABLE_TYPES.map(e=>i.default.createElement(n.Checkbox,{key:e,label:e,checked:a.includes(e),onClick:()=>l(a.includes(e),e)})))))}}];return i.default.createElement(n.Accordion,{defaultActiveIndex:-1,panels:c})}function g({language:e,filtered:t,total:a}){return i.default.createElement(i.default.Fragment,null,i.default.createElement(n.Icon,{name:"warning circle",style:{color:l.SSB_COLORS.YELLOW}}),c.HAVE_FILTERED(t,a)[e],i.default.createElement(n.Divider,{hidden:!0}))}function m({datasets:e,datasetTypeFilter:a,language:r}){const[u,s]=t.useState(e.filter(e=>a.includes(Object.keys(e)[0])));return t.useEffect(()=>{s(e.filter(e=>a.includes(Object.keys(e)[0])))},[e,a]),i.default.createElement(i.default.Fragment,null,2!==a.length&&i.default.createElement(g,{language:r,filtered:u.length,total:e.length}),i.default.createElement(n.Table,{basic:"very",selectable:!0},i.default.createElement(n.Table.Header,null,i.default.createElement(n.Table.Row,null,i.default.createElement(n.Table.HeaderCell,null,c.NAME[r]),i.default.createElement(n.Table.HeaderCell,null,c.DESCRIPTION[r]),i.default.createElement(n.Table.HeaderCell,null,c.TYPE[r]))),i.default.createElement(n.Table.Body,null,u.map(e=>{const t=Object.keys(e)[0],a=e[t],{id:c,name:u,description:s}=a;return i.default.createElement(n.Table.Row,{key:c},i.default.createElement(n.Table.Cell,null,l.getLocalizedGsimObjectText(r,u)),i.default.createElement(n.Table.Cell,null,l.getLocalizedGsimObjectText(r,s)),i.default.createElement(n.Table.Cell,null,t))}))))}const b={instanceVariable:"\n    {\n      instanceVariable(id: $id) {\n        reverseLogicalRecordInstanceVariables {\n          reverseUnitDataStructureLogicalRecords {\n            reverseUnitDataSetUnitDataStructure {\n              id\n              name {languageText}\n              description {languageText}\n            }\n          }\n        }\n      }\n    }\n  ",representedVariable:"\n    {\n      representedVariable(id: $id) {\n        reverseInstanceVariableRepresentedVariable {\n          reverseLogicalRecordInstanceVariables {\n            reverseUnitDataStructureLogicalRecords {\n              reverseUnitDataSetUnitDataStructure {\n                id\n                name {languageText}\n                description {languageText}\n              }\n            }\n          }\n        }\n      }\n    }\n  ",variable:"\n    {\n      variable(id: $id) {\n        reverseRepresentedVariableVariable {\n          reverseInstanceVariableRepresentedVariable {\n            reverseLogicalRecordInstanceVariables {\n              reverseUnitDataStructureLogicalRecords {\n                reverseUnitDataSetUnitDataStructure {\n                  id\n                  name {languageText}\n                  description {languageText}\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  "};function f({id:e,type:r,language:c}){const[s,d]=t.useState(-1),[E,g]=t.useState([]),[m,{loading:f,error:T,data:S}]=a.useManualQuery(b[r],{variables:{id:e}});t.useEffect(()=>{if(!f&&!T&&void 0!==S){const e=[],t=S[0][r],a=(t,n=0)=>{Array.isArray(t)?t.length>=1&&t.forEach(e=>a(e,n)):(t.hasOwnProperty(o.REVERSE[r][n])&&a(t[o.REVERSE[r][n]],n+1),t.hasOwnProperty("id")&&e.push(t))};a(t),g(e)}},[f,T,S,r]);const p=[{key:1,title:"",content:{content:f?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):E.length>=1?i.default.createElement(n.List,null,E.map(e=>{const{id:t,name:a}=e;return i.default.createElement(n.List.Item,{key:t},l.getLocalizedGsimObjectText(c,a))})):u.NO_RESULTS[c]}}];return i.default.createElement(n.Accordion,{activeIndex:s,panels:p,onTitleClick:(e,{index:t})=>{s!==t&&m(),d(s===t?-1:t)}})}function T({language:e,variables:a,variableTypeFilter:r}){const[u,s]=t.useState(a.filter(e=>r.includes(Object.keys(e)[0])));return t.useEffect(()=>{s(a.filter(e=>r.includes(Object.keys(e)[0])))},[a,r]),i.default.createElement(i.default.Fragment,null,3!==r.length&&i.default.createElement(g,{language:e,filtered:u.length,total:a.length}),i.default.createElement(n.Table,{basic:"very",selectable:!0},i.default.createElement(n.Table.Header,null,i.default.createElement(n.Table.Row,null,i.default.createElement(n.Table.HeaderCell,null,c.NAME[e]),i.default.createElement(n.Table.HeaderCell,null,c.VARIABLE_IN_DATASETS[e]),i.default.createElement(n.Table.HeaderCell,null,c.TYPE[e]))),i.default.createElement(n.Table.Body,null,u.map(t=>{const a=Object.keys(t)[0],r=t[a],{id:c,name:u,description:s}=r;return i.default.createElement(n.Table.Row,{key:c},i.default.createElement(n.Table.Cell,null,i.default.createElement(n.Popup,{basic:!0,flowing:!0,size:"large",position:"right center",trigger:i.default.createElement("span",null,l.getLocalizedGsimObjectText(e,u))},l.getLocalizedGsimObjectText(e,s))),i.default.createElement(n.Table.Cell,null,i.default.createElement(f,{id:c,type:a,language:e})),i.default.createElement(n.Table.Cell,null,a))}))))}return e.VariableSearch=function({restApi:e,language:r}){const[c,s]=t.useState(!1),[d,g]=t.useState(""),[b,f]=t.useState(!1),[S,p]=t.useState(""),[R,h]=t.useState([]),[A,y]=t.useState([]),[v,O]=t.useState(o.DATASET_TYPES),[x,L]=t.useState(o.VARIABLE_TYPES),[k,{loading:C,error:_,data:I}]=a.useManualQuery("\n{\n  instanceVariable(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  representedVariable(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  variable(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  unitDataSet(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  dimensionalDataSet(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n}\n",{variables:{text:d}});t.useEffect(()=>{if(!_&&!C&&void 0!==I){const t={variables:(e=I).filter(e=>o.VARIABLE_TYPES.some(t=>Object.getOwnPropertyNames(e).includes(t))),datasets:e.filter(e=>o.DATASET_TYPES.some(t=>Object.getOwnPropertyNames(e).includes(t)))};h(t.datasets),y(t.variables)}var e},[_,C,I]);const V=[{menuItem:i.default.createElement(n.Menu.Item,{key:"datasets"},u.DATASETS[r],i.default.createElement(n.Label,{style:{background:l.SSB_COLORS.BLUE}},C?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):R.length)),render:()=>R.length>=1?i.default.createElement(n.Tab.Pane,{as:n.Segment,basic:!0,style:{border:"none"}},i.default.createElement(m,{language:r,datasets:R,datasetTypeFilter:v})):null},{menuItem:i.default.createElement(n.Menu.Item,{key:"variables"},u.VARIABLES[r],i.default.createElement(n.Label,{style:{background:l.SSB_COLORS.BLUE}},C?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):A.length)),render:()=>A.length>=1?i.default.createElement(n.Tab.Pane,{as:n.Segment,basic:!0,style:{border:"none"}},i.default.createElement(T,{language:r,variables:A,variableTypeFilter:x})):null}];return i.default.createElement(n.Grid,null,i.default.createElement(n.Grid.Column,{width:4},i.default.createElement(n.Label,{attached:"top right",style:{background:"transparent"}},i.default.createElement(l.InfoPopup,{position:"right center",text:u.EXTERNAL_GRAPHIQL[r],trigger:i.default.createElement("a",{href:e+"/graphiql",target:"_blank",rel:"noopener noreferrer"},i.default.createElement(n.Icon,{link:!0,size:"large",name:"external",style:{color:l.SSB_COLORS.BLUE}}))})),i.default.createElement(n.Search,{size:"huge",open:!1,loading:C,value:d,placeholder:u.SEARCH[r],onKeyPress:({key:e})=>"Enter"===e&&void(d.length>=1&&(s(!0),f(!1),p(d),k())),onSearchChange:(e,{value:t})=>{f(!0),g(t)}}),c&&b&&i.default.createElement(l.InfoText,{text:u.EDITED[r]}),c&&b&&""!==S&&i.default.createElement(i.default.Fragment,null," (",i.default.createElement("i",null,u.PREVIOUS[r]),"'",i.default.createElement("b",null,S),"')",i.default.createElement("p",null,u.NEW_SEARCH[r])),i.default.createElement(E,{language:r,datasetTypeFilter:v,variableTypeFilter:x,handleDatasetTypeCheckbox:(e,t)=>{O(e?v.filter(e=>e!==t):v.concat([t]))},handleVariableTypeCheckbox:(e,t)=>{L(e?x.filter(e=>e!==t):x.concat([t]))}})),i.default.createElement(n.Grid.Column,{width:12},i.default.createElement(n.Tab,{defaultActiveIndex:-1,menu:{secondary:!0,pointing:!0},panes:V})))},e}({},React,graphqlHooks,semanticUiReact,daplaJsUtilities);
