var version=function(e,t,a,n,l){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(t);const c=["reverseLogicalRecordInstanceVariables","reverseUnitDataStructureLogicalRecords","reverseUnitDataSetUnitDataStructure"],u=["reverseInstanceVariableRepresentedVariable"].concat(c),s=["reverseRepresentedVariableVariable"].concat(u),d={GET_HEALTH:"/health/ready",GRAPHQL:"/graphql",GRAPHIQL:"/graphiql",SEARCH_METHODS:["filter","reverse"]},o={DATASET_TYPES:["dimensionalDataSet","unitDataSet"],ID:"id",REVERSE:{instanceVariable:c,representedVariable:u,variable:s},VARIABLE_TYPES:["instanceVariable","representedVariable","variable"]},E=(l.SSB_COLORS.BLUE,l.SSB_COLORS.GREEN,l.SSB_COLORS.YELLOW,l.SSB_COLORS.RED,{DESCRIPTION:{en:"Description",nb:"Beskrivelse"},HAVE_FILTERED:(e,t)=>({en:`Reminder that you have filtered your search, in total there are ${t} hit(s), but you are only showing ${e}`,nb:`Obs, du har filtrert søket, totalt ${t} treff, men etter filtrering vises bare ${e}`}),NAME:{en:"Name",nb:"Navn"},TYPE:{en:"Type",nb:"Type"},VARIABLE_IN_DATASETS:{en:"Variable used in datasets",nb:"Datasett variabelen er brukt i"}}),m="datasetsAccordionToggle",g={API_ERROR_MESSAGE:{en:"Something went wrong, check settings",nb:"Noe gikk galt, sjekk innstillingene"},CONFIGURE_SEARCH:{en:"Adjust search parameters",nb:"Søkealternativer"},DATASETS:{en:"Datasets",nb:"Datasett"},EDITED:{en:"Current results came from a previous search",nb:"Resultatene som foreligger gjelder forrige søk"},EXTERNAL_GRAPHIQL:{en:"Access GraphiQL directly",nb:"Skriv Graphql spørringer direkte mot tjenesten"},HEADER:{en:"Variable search",nb:"Variabelsøk"},NEW_SEARCH:{en:"Hit 'Enter' for a new search",nb:"Trykk 'Enter' for et nytt søk"},NO_RESULTS:{en:"Found nothing",nb:"Fant ingenting"},PREVIOUS:{en:"wich was: ",nb:"som var: "},SEARCH:{en:"Search...",nb:"Søk..."},SEARCH_METHOD:{en:"Search method:",nb:"Søkemetode:"},SHOW_OF_TYPE:(e,t)=>({en:`Of ${g[e][t].toLowerCase()} show me: `,nb:`Av ${g[e][t].toLowerCase()} vis meg: `}),VARIABLES:{en:"Variables",nb:"Variabler"}};function f({datasetTypeFilter:e,handleDatasetTypeCheckbox:t,chosenSearchMethod:a,handleSearchMethodCheckbox:l,variableTypeFilter:r,handleVariableTypeCheckbox:c,language:u}){const s=[{key:1,title:g.CONFIGURE_SEARCH[u],content:{content:i.default.createElement(n.Grid,{columns:"equal"},i.default.createElement(n.Grid.Row,null,i.default.createElement(n.Grid.Column,null,g.SHOW_OF_TYPE("DATASETS",u)[u]),i.default.createElement(n.Grid.Column,null,i.default.createElement(n.List,null,o.DATASET_TYPES.map(a=>i.default.createElement(n.List.Item,{key:a},i.default.createElement(n.Checkbox,{label:a,checked:e.includes(a),onClick:()=>t(e.includes(a),a)})))))),i.default.createElement(n.Grid.Row,null,i.default.createElement(n.Grid.Column,null,g.SHOW_OF_TYPE("VARIABLES",u)[u]),i.default.createElement(n.Grid.Column,null,i.default.createElement(n.List,null,o.VARIABLE_TYPES.map(e=>i.default.createElement(n.List.Item,{key:e},i.default.createElement(n.Checkbox,{label:e,checked:r.includes(e),onClick:()=>c(r.includes(e),e)})))))),i.default.createElement(n.Grid.Row,null,i.default.createElement(n.Grid.Column,null,g.SEARCH_METHOD[u]),i.default.createElement(n.Grid.Column,null,i.default.createElement(n.List,null,d.SEARCH_METHODS.map(e=>i.default.createElement(n.List.Item,{key:e},i.default.createElement(n.Checkbox,{label:e,checked:e===a,onClick:()=>l(e)})))))))}}];return i.default.createElement(n.Accordion,{defaultActiveIndex:-1,panels:s})}function b({language:e,filtered:t,total:a}){return i.default.createElement(i.default.Fragment,null,i.default.createElement(n.Icon,{name:"warning circle",style:{color:l.SSB_COLORS.YELLOW}}),E.HAVE_FILTERED(t,a)[e],i.default.createElement(n.Divider,{hidden:!0}))}function S({datasets:e,datasetTypeFilter:a,language:r}){const[c,u]=t.useState(e.filter(e=>a.includes(Object.keys(e)[0])));return t.useEffect(()=>{u(e.filter(e=>a.includes(Object.keys(e)[0])))},[e,a]),i.default.createElement(i.default.Fragment,null,2!==a.length&&i.default.createElement(b,{language:r,filtered:c.length,total:e.length}),i.default.createElement(n.Table,{basic:"very",selectable:!0},i.default.createElement(n.Table.Header,null,i.default.createElement(n.Table.Row,null,i.default.createElement(n.Table.HeaderCell,null,E.NAME[r]),i.default.createElement(n.Table.HeaderCell,null,E.DESCRIPTION[r]),i.default.createElement(n.Table.HeaderCell,null,E.TYPE[r]))),i.default.createElement(n.Table.Body,null,c.map(e=>{const t=Object.keys(e)[0],a=e[t],{id:c,name:u,description:s}=a;return i.default.createElement(n.Table.Row,{key:c},i.default.createElement(n.Table.Cell,null,l.getLocalizedGsimObjectText(r,u)),i.default.createElement(n.Table.Cell,null,l.getLocalizedGsimObjectText(r,s)),i.default.createElement(n.Table.Cell,null,t))}))))}const T={instanceVariable:"\n    {\n      unitDataSet(filter: {unitDataStructure: {logicalRecords_some: {instanceVariables_some: {id: $id}}}}) {\n        id\n        name {languageText}\n        description {languageText}\n      }\n    }\n  ",representedVariable:"\n    {\n      unitDataSet(filter: {unitDataStructure: {logicalRecords_some: {instanceVariables_some: {representedVariable_some: {id: $id}}}}}) {\n        id\n        name {languageText}\n        description {languageText}\n      }\n    }\n  ",variable:"\n    {\n      unitDataSet(filter: {unitDataStructure: {logicalRecords_some: {instanceVariables_some: {representedVariable_some: {variable_some: {id: $id}}}}}}) {\n        id\n        name {languageText}\n        description {languageText}\n      }\n    }\n  "},p={instanceVariable:"\n    {\n      instanceVariable(id: $id) {\n        reverseLogicalRecordInstanceVariables {\n          reverseUnitDataStructureLogicalRecords {\n            reverseUnitDataSetUnitDataStructure {\n              id\n              name {languageText}\n              description {languageText}\n            }\n          }\n        }\n      }\n    }\n  ",representedVariable:"\n    {\n      representedVariable(id: $id) {\n        reverseInstanceVariableRepresentedVariable {\n          reverseLogicalRecordInstanceVariables {\n            reverseUnitDataStructureLogicalRecords {\n              reverseUnitDataSetUnitDataStructure {\n                id\n                name {languageText}\n                description {languageText}\n              }\n            }\n          }\n        }\n      }\n    }\n  ",variable:"\n    {\n      variable(id: $id) {\n        reverseRepresentedVariableVariable {\n          reverseInstanceVariableRepresentedVariable {\n            reverseLogicalRecordInstanceVariables {\n              reverseUnitDataStructureLogicalRecords {\n                reverseUnitDataSetUnitDataStructure {\n                  id\n                  name {languageText}\n                  description {languageText}\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  "};function h({id:e,type:r,language:c}){const[u,s]=t.useState(-1),[d,E]=t.useState([]),[f,{loading:b,error:S,data:p}]=a.useManualQuery(T[r],{variables:{id:e}});t.useEffect(()=>{b||S||void 0===p||Array.isArray(p)&&0!==p.length&&E(p.map(e=>e[o.DATASET_TYPES[1]]))},[b,S,p,r]);const h=[{key:1,title:{content:"","data-testid":m},content:{content:b?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):d.length>=1?i.default.createElement(n.List,null,d.map(e=>{const{id:t,name:a}=e;return i.default.createElement(n.List.Item,{key:t},l.getLocalizedGsimObjectText(c,a))})):g.NO_RESULTS[c]}}];return i.default.createElement(n.Accordion,{activeIndex:u,panels:h,onTitleClick:(e,{index:t})=>{u!==t&&f(),s(u===t?-1:t)}})}function R({id:e,type:r,language:c}){const[u,s]=t.useState(-1),[d,E]=t.useState([]),[f,{loading:b,error:S,data:T}]=a.useManualQuery(p[r],{variables:{id:e}});t.useEffect(()=>{if(!b&&!S&&void 0!==T){const e=[];if(Array.isArray(T)&&0!==T.length){const t=T[0][r],a=(t,n=0)=>{Array.isArray(t)?t.length>=1&&t.forEach(e=>a(e,n)):(t.hasOwnProperty(o.REVERSE[r][n])&&a(t[o.REVERSE[r][n]],n+1),t.hasOwnProperty(o.ID)&&e.push(t))};a(t),E(e)}}},[b,S,T,r]);const h=[{key:1,title:{content:"","data-testid":m},content:{content:b?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):d.length>=1?i.default.createElement(n.List,null,d.map(e=>{const{id:t,name:a}=e;return i.default.createElement(n.List.Item,{key:t},l.getLocalizedGsimObjectText(c,a))})):g.NO_RESULTS[c]}}];return i.default.createElement(n.Accordion,{activeIndex:u,panels:h,onTitleClick:(e,{index:t})=>{u!==t&&f(),s(u===t?-1:t)}})}function A({language:e,searchMethod:a,variables:r,variableTypeFilter:c}){const[u,s]=t.useState(r.filter(e=>c.includes(Object.keys(e)[0])));return t.useEffect(()=>{s(r.filter(e=>c.includes(Object.keys(e)[0])))},[r,c]),i.default.createElement(i.default.Fragment,null,3!==c.length&&i.default.createElement(b,{language:e,filtered:u.length,total:r.length}),i.default.createElement(n.Table,{basic:"very",selectable:!0},i.default.createElement(n.Table.Header,null,i.default.createElement(n.Table.Row,null,i.default.createElement(n.Table.HeaderCell,null,E.NAME[e]),i.default.createElement(n.Table.HeaderCell,null,E.VARIABLE_IN_DATASETS[e]),i.default.createElement(n.Table.HeaderCell,null,E.TYPE[e]))),i.default.createElement(n.Table.Body,null,u.map(t=>{const r=Object.keys(t)[0],c=t[r],{id:u,name:s,description:o}=c;return i.default.createElement(n.Table.Row,{key:u},i.default.createElement(n.Table.Cell,null,i.default.createElement(n.Popup,{basic:!0,flowing:!0,size:"large",position:"right center",trigger:i.default.createElement("span",null,l.getLocalizedGsimObjectText(e,s))},l.getLocalizedGsimObjectText(e,o))),i.default.createElement(n.Table.Cell,null,a===d.SEARCH_METHODS[0]?i.default.createElement(h,{id:u,type:r,language:e}):i.default.createElement(R,{id:u,type:r,language:e})),i.default.createElement(n.Table.Cell,null,r))}))))}return e.VariableSearch=function({restApi:e,language:r}){const[c,u]=t.useState(!1),[s,E]=t.useState(""),[m,b]=t.useState(!1),[T,p]=t.useState(""),[h,R]=t.useState([]),[y,x]=t.useState([]),[L,_]=t.useState(o.DATASET_TYPES),[v,O]=t.useState(o.VARIABLE_TYPES),[C,k]=t.useState(d.SEARCH_METHODS[0]),[I,{loading:D,error:V,data:H}]=a.useManualQuery("\n{\n  instanceVariable(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  representedVariable(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  variable(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  unitDataSet(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n  dimensionalDataSet(filter: {OR: [{name: {languageText_contains: $text}}, {description: {languageText_contains: $text}}]}) {\n    id\n    name {languageText}\n    description {languageText}\n  }\n}\n",{variables:{text:s}});t.useEffect(()=>{if(!V&&!D&&void 0!==H){const t={variables:(e=H).filter(e=>o.VARIABLE_TYPES.some(t=>Object.getOwnPropertyNames(e).includes(t))),datasets:e.filter(e=>o.DATASET_TYPES.some(t=>Object.getOwnPropertyNames(e).includes(t)))};R(t.datasets),x(t.variables)}var e},[V,D,H]);const P=[{menuItem:i.default.createElement(n.Menu.Item,{key:"datasets"},g.DATASETS[r],i.default.createElement(n.Label,{style:{background:l.SSB_COLORS.BLUE}},D?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):h.length)),render:()=>h.length>=1?i.default.createElement(n.Tab.Pane,{as:n.Segment,basic:!0,style:{border:"none"}},i.default.createElement(S,{language:r,datasets:h,datasetTypeFilter:L})):null},{menuItem:i.default.createElement(n.Menu.Item,{key:"variables"},g.VARIABLES[r],i.default.createElement(n.Label,{style:{background:l.SSB_COLORS.BLUE}},D?i.default.createElement(n.Icon,{loading:!0,name:"spinner"}):y.length)),render:()=>y.length>=1?i.default.createElement(n.Tab.Pane,{as:n.Segment,basic:!0,style:{border:"none"}},i.default.createElement(A,{language:r,variables:y,searchMethod:C,variableTypeFilter:v})):null}];return i.default.createElement(n.Grid,null,i.default.createElement(n.Grid.Column,{width:4},i.default.createElement(n.Label,{attached:"top right",style:{background:"transparent"}},i.default.createElement(l.InfoPopup,{position:"right center",text:g.EXTERNAL_GRAPHIQL[r],trigger:i.default.createElement("a",{href:`${e}${d.GRAPHIQL}`,target:"_blank",rel:"noopener noreferrer"},i.default.createElement(n.Icon,{link:!0,size:"large",name:"external",style:{color:l.SSB_COLORS.BLUE}}))})),i.default.createElement(n.Search,{size:"huge",open:!1,loading:D,value:s,placeholder:g.SEARCH[r],onKeyPress:({key:e})=>"Enter"===e&&void(s.length>=1&&(u(!0),b(!1),p(s),I())),onSearchChange:(e,{value:t})=>{b(!0),E(t)}}),c&&m&&i.default.createElement(l.InfoText,{text:g.EDITED[r]}),c&&m&&""!==T&&i.default.createElement(i.default.Fragment,null," (",i.default.createElement("i",null,g.PREVIOUS[r]),"'",i.default.createElement("b",null,T),"')",i.default.createElement("p",null,g.NEW_SEARCH[r])),i.default.createElement(f,{language:r,datasetTypeFilter:L,variableTypeFilter:v,chosenSearchMethod:C,handleDatasetTypeCheckbox:(e,t)=>{_(e?L.filter(e=>e!==t):L.concat([t]))},handleVariableTypeCheckbox:(e,t)=>{O(e?v.filter(e=>e!==t):v.concat([t]))},handleSearchMethodCheckbox:e=>k(e)})),i.default.createElement(n.Grid.Column,{width:12},i.default.createElement(n.Tab,{defaultActiveIndex:-1,menu:{secondary:!0,pointing:!0},panes:P})))},e}({},React,graphqlHooks,semanticUiReact,daplaJsUtilities);
